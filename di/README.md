# Плюсы и минусы DI
В примере реализации сервера аутентификации с применением DI удалось избежать
зависимости модулей от конкретных экземпляров. В результате появилась возможность
повторно использовать каждый из модулей без особых усилий и без внесения
изменений в их код. Использование шаблона DI также значительно облегчает модульное
тестирование, поскольку упрощает создание фиктивных зависимостей и тестирование
каждого из модулей независимо от состояния остальной системы.

Еще один важный аспект этого примера заключается в перекладывании ответственности
за внедрение зависимостей на компоненты верхнего уровня архитектуры. Идея
состоит в том, что компоненты высокого уровня по своей природе менее многоразовые,
чем компоненты низкого уровня, поскольку по мере увеличения уровня компонентов
приложения они становится все более конкретными.

Исходя из этого предположения, можно понять, что при обычном подходе к проектированию
архитектуры приложения компоненты высокого уровня отвечают за зависимости
компонентов более низкого уровня, которые могут быть инвертированы,
поскольку компоненты нижнего уровня зависят только от интерфейсов (в JavaScript
это просто интерфейсы, ожидаемые от зависимостей), тогда как ответственность за
определение реализаций зависимостей ложится на компоненты более высокого уровня.
Действительно, в сервере аутентификации все зависимости создаются и связываются
в компоненте верхнего уровня, то есть модуле app, который является менее
многоразовым и поэтому более всего подходит для организации связывания.

Но все эти преимущества в терминах слабой связанности и повторного использования
имеют свою цену. В целом невозможность разрешения зависимостей в момент
написания кода затрудняет понимание взаимосвязей между различными компонентами
системы. Кроме того, исследовав внедрение зависимостей в модуле app, можно
заметить, что при этом должен соблюдаться определенный порядок. Это влечет необходимость
составления вручную графа зависимостей всего приложения. При значительном
увеличении количества связываемых модулей этот процесс может стать
неуправляемым.

Реальным решением данной проблемы является разделение ответственности за
внедрение зависимостей между несколькими компонентами вместо концентрации
в одном месте. Это позволит уменьшить экспоненциальный рост сложности управления
зависимостями, поскольку каждый компонент будет отвечать только за зависимости
своего подграфа. Конечно, при необходимости можно использовать DI
локально, а не передавать все внедрение зависимостей компоненту верхнего уровня
приложения.